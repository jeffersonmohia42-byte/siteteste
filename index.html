<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L/R Processor ‚Äì LTC & Ru√≠do Base</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéß L/R Processor</h1>
      <p class="sub">L = LTC/Ru√≠do Base ‚Ä¢ R = M√∫sica</p>
    </header>

    <section class="card">
      <div class="upload">
        <p id="musicStatus">üìÅ Envie sua m√∫sica</p>
        <input id="musicFile" type="file" accept="audio/*" hidden />
        <button class="btn" id="btnPickMusic">Selecionar M√∫sica</button>
        <canvas id="statusCanvas" width="520" height="90"></canvas>
      </div>
    </section>

    <section class="card controls">
      <div class="row">
        <label>Modo do L</label>
        <select id="modeL">
          <option value="noisebase" selected>Ru√≠do Base (nuvem)</option>
          <option value="ltc">LTC SMPTE</option>
        </select>
      </div>

      <div class="row" id="fpsRow">
        <label>FPS (LTC)</label>
        <select id="fpsSel">
          <option value="30" selected>30 (ND)</option>
          <option value="29.97">29.97 (DF)</option>
          <option value="25">25</option>
          <option value="24">24</option>
        </select>
      </div>

      <div class="row" id="bpmRow">
        <label>BPM do Ru√≠do Base</label>
        <input type="number" id="bpmInput" min="40" max="220" value="120" />
      </div>

      <div class="row">
        <label>N√≠vel L (Ru√≠do/LTC)</label>
        <input type="range" id="levelL" min="0" max="100" value="55" />
      </div>

      <div class="row">
        <label>N√≠vel R (M√∫sica)</label>
        <input type="range" id="levelR" min="0" max="100" value="100" />
      </div>

      <div class="buttons">
        <button class="btn" id="btnProcess" disabled>Processar</button>
        <button class="btn ghost" id="btnDownload" disabled>‚¨áÔ∏è Baixar Mix L/R</button>
      </div>
    </section>

    <section class="card">
      <audio id="preview" controls></audio>
    </section>
  </div>

  <script type="module">
    import { generateLTC } from '/src/ltc.js';
    import { getNoiseBaseURL, fetchAudioBuffer } from '/src/cloud.js';
    import { initApp } from '/src/app.js';
    initApp({ generateLTC, getNoiseBaseURL, fetchAudioBuffer });
  </script>
</body>
</html>
